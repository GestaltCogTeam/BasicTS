# ğŸ“‰ è¯„ä¼°æŒ‡æ ‡è®¾è®¡ (Metrics)

## æ¥å£è§„èŒƒ

è¯„ä¼°æŒ‡æ ‡æ˜¯è¯„ä¼°æ¨¡å‹æ€§èƒ½çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚åœ¨ BasicTS ä¸­ï¼Œè¯„ä¼°æŒ‡æ ‡æ˜¯æ¥å—æ¨¡å‹é¢„æµ‹å€¼ã€çœŸå®å€¼åŠå…¶ä»–å‚æ•°ä½œä¸ºè¾“å…¥å¹¶è¿”å›æ ‡é‡å€¼ä»¥è¯„ä¼°æ¨¡å‹æ€§èƒ½çš„å‡½æ•°ã€‚

ä¸€ä¸ªå®šä¹‰è‰¯å¥½çš„è¯„ä¼°æŒ‡æ ‡å‡½æ•°åº”åŒ…å«ä»¥ä¸‹å‚æ•°ï¼š
- **prediction**: æ¨¡å‹çš„é¢„æµ‹å€¼
- **target**: å®é™…çš„çœŸå®å€¼
- **null_val**: å¯é€‰å‚æ•°ï¼Œç”¨äºå¤„ç†ç¼ºå¤±å€¼

`prediction` å’Œ `target` æ˜¯å¿…éœ€å‚æ•°ï¼Œè€Œ `null_val` æ˜¯å¯é€‰å‚æ•°ï¼Œä½†å¼ºçƒˆå»ºè®®é‡‡çº³ï¼Œä»¥å¤„ç†æ—¶é—´åºåˆ—æ•°æ®ä¸­å¸¸è§çš„ç¼ºå¤±å€¼ã€‚`null_val` ä¼šè‡ªåŠ¨åŸºäºé…ç½®æ–‡ä»¶ä¸­çš„ `CFG.NULL_VAL` å€¼è®¾ç½®ï¼Œç¼ºçœå€¼ä¸º `np.nan`ã€‚

è¯„ä¼°æŒ‡æ ‡å‡½æ•°è¿˜å¯ä»¥æ¥å—å…¶ä»–é¢å¤–å‚æ•°ï¼Œè¿™äº›å‚æ•°ä¼šä»æ¨¡å‹çš„è¿”å›å€¼ä¸­æå–å¹¶ä¼ é€’ç»™æŒ‡æ ‡å‡½æ•°ã€‚

> [!CAUTION]  
> å¦‚æœè¿™äº›é¢å¤–å‚æ•°ï¼ˆå¦‚ `prediction`ã€`target` å’Œ `inputs` ä¹‹å¤–çš„å‚æ•°ï¼‰éœ€è¦å½’ä¸€åŒ–æˆ–åå½’ä¸€åŒ–ï¼Œè¯·ç›¸åº”åœ°è°ƒæ•´ `runner` ä¸­çš„ `preprocessing` å’Œ `postprocessing` å‡½æ•°ã€‚

## BasicTS å†…ç½®è¯„ä¼°æŒ‡æ ‡

BasicTS æä¾›äº†å¤šç§å¸¸ç”¨çš„è¯„ä¼°æŒ‡æ ‡ï¼Œä¾‹å¦‚ `MAE`ã€`MSE`ã€`RMSE`ã€`MAPE` å’Œ `WAPE`ã€‚æ‚¨å¯ä»¥åœ¨ `basicts/metrics` ç›®å½•ä¸­æ‰¾åˆ°è¿™äº›æŒ‡æ ‡çš„å®ç°ã€‚

## å¦‚ä½•å®ç°è‡ªå®šä¹‰è¯„ä¼°æŒ‡æ ‡

æ ¹æ®æ¥å£è§„èŒƒä¸­çš„æŒ‡å—ï¼Œæ‚¨å¯ä»¥è½»æ¾å®ç°è‡ªå®šä¹‰çš„è¯„ä¼°æŒ‡æ ‡ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š

```python
class MyModel:
    def __init__(self):
        # åˆå§‹åŒ–æ¨¡å‹
        ...
    
    def forward(...):
        # å‰å‘è®¡ç®—
        ...
        return {
                'prediction': prediction,
                'target': target,
                'other_key1': other_value1,
                'other_key2': other_value2,
                'other_key3': other_value3,
                ...
        }

def my_metric_1(prediction, target, null_val=np.nan, other_key1=None, other_key2=None, ...):
    # è®¡ç®—æŒ‡æ ‡
    ...

def my_metric_2(prediction, target, null_val=np.nan, other_key3=None, ...):
    # è®¡ç®—æŒ‡æ ‡
    ...
```

éµå¾ªè¿™äº›è§„èŒƒï¼Œæ‚¨å¯ä»¥çµæ´»åœ°åœ¨ BasicTS ä¸­è‡ªå®šä¹‰å’Œæ‰©å±•è¯„ä¼°æŒ‡æ ‡ï¼Œä»¥æ»¡è¶³ç‰¹å®šéœ€æ±‚ã€‚

## ğŸ§‘â€ğŸ’» è¿›ä¸€æ­¥æ¢ç´¢

- **ğŸ‰ [å¿«é€Ÿä¸Šæ‰‹](./getting_started_cn.md)**
- **ğŸ’¡ [äº†è§£ BasicTS çš„è®¾è®¡ç†å¿µ](./overall_design_cn.md)**
- **ğŸ“¦ [æ¢ç´¢æ•°æ®é›†è®¾è®¡å¹¶è‡ªå®šä¹‰æ•°æ®é›†](./dataset_design_cn.md)**
- **ğŸ› ï¸ [äº†è§£æ•°æ®ç¼©æ”¾å™¨è®¾è®¡å¹¶åˆ›å»ºè‡ªå®šä¹‰ç¼©æ”¾å™¨](./scaler_design_cn.md)**
- **ğŸ§  [æ·±å…¥äº†è§£æ¨¡å‹è®¾è®¡å¹¶æ„å»ºè‡ªå®šä¹‰æ¨¡å‹](./model_design_cn.md)**
- **ğŸ“‰ [äº†è§£è¯„ä¼°æŒ‡æ ‡è®¾è®¡å¹¶å¼€å‘è‡ªå®šä¹‰æŸå¤±å‡½æ•°ä¸è¯„ä¼°æŒ‡æ ‡](./metrics_design_cn.md)**
- **ğŸƒâ€â™‚ï¸ [æŒæ¡æ‰§è¡Œå™¨è®¾è®¡å¹¶åˆ›å»ºè‡ªå®šä¹‰æ‰§è¡Œå™¨](./runner_design_cn.md)**
- **ğŸ“œ [è§£æé…ç½®æ–‡ä»¶è®¾è®¡å¹¶è‡ªå®šä¹‰é…ç½®](./config_design_cn.md)**
- **ğŸ” [æ¢ç´¢å¤šç§åŸºçº¿æ¨¡å‹](../baselines/)**
